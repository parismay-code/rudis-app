events {
}

http {
    proxy_cache_path /etc/nginx/cache keys_zone=one:500m max_size=1000m;

    server {
        proxy_cache one;
        proxy_cache_key $request_method$request_uri;
        proxy_cache_min_uses 1;
        proxy_cache_methods GET;
        proxy_cache_valid 200 1y;

        listen 80;
        server_name localhost;

        location / {
            proxy_pass http://rudis_react:3000;
        }

        location /api/ {
            proxy_pass http://rudis_api:9000;
        }
    }
}